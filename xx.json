{
  "description": "Write bonding capabilities, missing parameters are not touched, null parameters sets values to their default state",
  "type": "object",
  "required": [
    "ifname",
    "capability"
  ],
  "additionalProperties": false,
  "properties": {
    "ifname": {
      "description": "bonding interface name",
      "type": "string",
      "pattern": "^bond(0|[1-9][0-9]{0,3})$"
    },
    "capability": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "hash_policy": {
          "description": "Set hash policy.",
          "type": "string",
          "oneOf": [
            {
              "const": "layer2",
              "description": "Use only MAC addresses. (by default)"
            },
            {
              "const": "layer2+3",
              "description": "Use MAC and IP addresses"
            },
            {
              "const": "layer3+4",
              "description": "Use IP addresses and upper protocol information"
            }
          ]
        },
        "link_monitor_period": {
          "description": "Set the MII link monitoring frequency",
          "oneOf": [
            {
              "type": "integer",
              "minimum": 0,
              "maximum": 2147483647,
              "description": "<0-2147483647>"
            },
            {
              "type": "null"
            }
          ]
        },
        "enslave": {
          "type": "array",
          "description": "list of connected ethernet and vlan interfaces",
          "items": {
            "oneOf": [
              {
                "description": "ethernet interface name",
                "type": "string",
                "pattern": "^eth(0|[1-9][0-9]{0,3})$"
              },
              {
                "description": "Ethernet VLAN subinterface name",
                "type": "string",
                "pattern": "^eth(0|[1-9][0-9]{0,3})([\\.](0|[1-9][0-9]{0,3}))$"
              },
              {
                "description": "vlan interface name",
                "type": "string",
                "pattern": "^vlan([0-9]|[1-9][0-9]{1,2}|[1-3][0-9]{3}|40[0-8][0-9]|409[0-5])$"
              }
            ]
          }
        }
      }
    }
  }
}
['ifname', 'capability', 'hash_policy', {'const': 'layer2', 'description': 'Use only MAC addresses. (by default)'}, {'const': 'layer2+3', 'description': 'Use MAC and IP addresses'}, {'const': 'layer3+4', 'description': 'Use IP addresses and upper protocol information'}, 'link_monitor_period', {'type': 'integer', 'minimum': 0, 'maximum': 2147483647, 'description': '<0-2147483647>'}, {'type': 'null'}, 'enslave']
{'ifname': 'bond0', 'capability': {'link_monitor_period': None}} ---- 2
{'ifname': 'bond7697', 'capability': {'hash_policy': 'architecto Nullam placeat veniam vehicula vitae'}} ---- 2
{'ifname': 'bond4', 'capability': {'link_monitor_period': None}} ---- 2
{'ifname': 'bond0', 'capability': {'hash_policy': 'Nullam dui sit', 'enslave': ['vlan2711', 'eth810.126', 'eth4051', 'vlan1510', 'eth0.67']}} ---- 2
{'ifname': 'bond974', 'capability': {'hash_policy': 'dui mattis', 'link_monitor_period': 1417791689, 'enslave': []}} ---- 2
{'ifname': 'bond43', 'capability': {'hash_policy': 'esse possimus', 'link_monitor_period': None, 'enslave': []}} ---- 2
{'ifname': 'bond2', 'capability': {'hash_policy': '', 'enslave': ['vlan6', 'vlan4010', 'eth0.7389', 'eth0.0', 'eth4420.62']}} ---- 2
{'ifname': 'bond3', 'capability': {}} ---- 2
{'ifname': 'bond2', 'capability': {'hash_policy': 'placeat possimus ut'}} ---- 2
{'ifname': 'bond0', 'capability': {'link_monitor_period': None, 'enslave': ['eth607.199', 'vlan4092', 'eth0.170', 'eth2723']}} ---- 2
